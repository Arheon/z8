apply plugin: 'java'

configurations {
	boot
}
repositories {
	mavenCentral()
	maven { url 'https://mvnrepository.com/repos/central' }
}

dependencies {
	boot project(':org.zenframework.z8.boot')

	compile project(':org.zenframework.z8.boot')

	implementation ('com.google.code.gson:gson:2.8.6')
	compile ('org.freemarker:freemarker:2.3.30')
	compile ('org.zenframework.z8.dependencies:z8-dependencies-commons:3.0@pom') { transitive = true }
	compile ('org.zenframework.z8.dependencies:z8-dependencies-libreoffice:3.0@pom') { transitive = true }
	compile ('org.zenframework.z8.dependencies:z8-dependencies-birt:3.0@pom') { transitive = true }
}

eclipse.classpath.file.whenMerged {
	entries.findAll { entry ->
		entry instanceof org.gradle.plugins.ide.eclipse.model.Container
	}.each { entry ->
		entry.accessRules.add new org.gradle.plugins.ide.eclipse.model.AccessRule('0', 'sun/rmi/**')
	}
}

tasks.withType(JavaCompile) {
	doFirst {
		options.compilerArgs.add '-Xbootclasspath/p:' + configurations.boot.singleFile.toPath()
	}
}

publishing.publications {
	maven(MavenPublication) {
		from components.java
	}
}
