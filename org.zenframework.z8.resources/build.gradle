apply plugin: 'base'

configurations.default.attributes {
	attribute(LibraryElements.LIBRARY_ELEMENTS_ATTRIBUTE, project.objects.named(LibraryElements, 'web'))
}

task assembleZip(type: Zip, group: 'Build') {
	archiveName "${project.name}-${project.version}.zip"
	destinationDir file("${buildDir}/libs/")
	from("${projectDir}/src") {
		includeEmptyDirs = false
	}
	description "Assemble archive ${archiveName} into ${relativePath(destinationDir)}"
}

assemble.dependsOn assembleZip

artifacts.add('default', assembleZip) {
	builtBy assembleZip
}

publishing.publications {
	maven(MavenPublication) {
		artifact source: assembleZip, extension: 'zip'
	}
}
